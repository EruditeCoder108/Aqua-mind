<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a1628">
    <meta name="description" content="Aqua-Mind - AI-Powered Water Quality Intelligence for Jal Jeevan Mission">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <title>Aqua-Mind | Water Intelligence</title>

    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üíß</text></svg>">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- Splash Screen -->
    <div id="splash" class="splash">
        <div class="splash-content">
            <div class="splash-logo">üíß</div>
            <h1 class="splash-title">Aqua-Mind</h1>
            <p class="splash-subtitle">Water Quality Intelligence</p>
            <div class="splash-loader">
                <div class="splash-wave"></div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="app hidden">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <span class="header-logo">üíß</span>
                <h1 class="header-title">Aqua-Mind</h1>
            </div>
            <div class="header-right">
                <button id="btn-connect" class="btn-icon" title="Connect Device">
                    <span class="icon">üì∂</span>
                    <span class="status-dot disconnected"></span>
                </button>
                <button id="btn-settings" class="btn-icon" title="Settings">
                    <span class="icon">‚öôÔ∏è</span>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <!-- Connection Banner -->
            <div id="connection-banner" class="connection-banner">
                <div class="banner-content">
                    <span class="banner-icon">üì±</span>
                    <span class="banner-text">Tap to connect your Aqua-Mind device</span>
                </div>
            </div>

            <!-- Jal Score Card -->
            <section class="score-card">
                <div class="score-ring-container">
                    <svg class="score-ring" viewBox="0 0 200 200">
                        <circle class="score-ring-bg" cx="100" cy="100" r="85"></circle>
                        <circle class="score-ring-progress" cx="100" cy="100" r="85" stroke-dasharray="534"
                            stroke-dashoffset="534"></circle>
                    </svg>
                    <div class="score-value-container">
                        <span class="score-label">Jal-Score</span>
                        <span id="jal-score" class="score-value">--</span>
                        <span id="verdict" class="verdict">Waiting...</span>
                    </div>
                </div>
                <p id="verdict-message" class="verdict-message">Connect device to start analysis</p>
            </section>

            <!-- Readings Grid -->
            <section class="readings-section">
                <h2 class="section-title">Live Readings</h2>
                <div class="readings-grid">
                    <div class="reading-card" data-param="tds">
                        <div class="reading-icon">üß™</div>
                        <div class="reading-info">
                            <span class="reading-label">TDS</span>
                            <span id="reading-tds" class="reading-value">-- <small>ppm</small></span>
                        </div>
                        <div class="reading-bar">
                            <div id="bar-tds" class="reading-bar-fill" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="reading-card" data-param="turb">
                        <div class="reading-icon">üí®</div>
                        <div class="reading-info">
                            <span class="reading-label">Turbidity</span>
                            <span id="reading-turb" class="reading-value">-- <small>NTU</small></span>
                        </div>
                        <div class="reading-bar">
                            <div id="bar-turb" class="reading-bar-fill" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="reading-card" data-param="temp">
                        <div class="reading-icon">üå°Ô∏è</div>
                        <div class="reading-info">
                            <span class="reading-label">Temperature</span>
                            <span id="reading-temp" class="reading-value">-- <small>¬∞C</small></span>
                        </div>
                        <div class="reading-bar">
                            <div id="bar-temp" class="reading-bar-fill" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="reading-card" data-param="stability">
                        <div class="reading-icon">üìä</div>
                        <div class="reading-info">
                            <span class="reading-label">Stability</span>
                            <span id="reading-stability" class="reading-value">-- <small>%</small></span>
                        </div>
                        <div class="reading-bar">
                            <div id="bar-stability" class="reading-bar-fill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- AI Analysis Section -->
            <section id="ai-section" class="ai-section hidden">
                <h2 class="section-title">
                    <span>ü§ñ AI Analysis</span>
                    <button id="btn-refresh-ai" class="btn-small">Refresh</button>
                </h2>
                <div id="ai-loading" class="ai-loading hidden">
                    <div class="ai-loading-dots">
                        <span></span><span></span><span></span>
                    </div>
                    <span>Analyzing with Gemini...</span>
                </div>
                <div id="ai-result" class="ai-result">
                    <div class="ai-headline">
                        <span id="ai-icon" class="ai-status-icon">‚úÖ</span>
                        <span id="ai-headline" class="ai-headline-text">Water appears safe</span>
                    </div>
                    <p id="ai-explanation" class="ai-explanation"></p>
                    <div id="ai-action" class="ai-action">
                        <span class="action-label">Recommended Action:</span>
                        <p id="ai-action-text"></p>
                    </div>
                </div>
            </section>

            <!-- Profile Info -->
            <section class="profile-section">
                <div class="profile-info">
                    <span class="profile-icon">üìç</span>
                    <span id="profile-name" class="profile-name">Jabalpur, MP</span>
                </div>
                <div id="seasonal-alert" class="seasonal-alert hidden">
                    <span class="alert-icon">‚ö†Ô∏è</span>
                    <span id="seasonal-alert-text"></span>
                </div>
            </section>

            <!-- History Section -->
            <section class="history-section">
                <h2 class="section-title">Recent Tests</h2>
                <div id="history-list" class="history-list">
                    <div class="history-empty">No tests yet. Connect device to start.</div>
                </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-view="home">
                <span class="nav-icon">üè†</span>
                <span class="nav-label">Home</span>
            </button>
            <button class="nav-item" data-view="history">
                <span class="nav-icon">üìä</span>
                <span class="nav-label">History</span>
            </button>
            <button class="nav-item" data-view="learn">
                <span class="nav-icon">üìö</span>
                <span class="nav-label">Learn</span>
            </button>
            <button class="nav-item" data-view="settings">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span class="nav-label">Settings</span>
            </button>
        </nav>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <label class="setting-label">Regional Profile</label>
                    <select id="setting-profile" class="setting-select">
                        <option value="DHANWANTRI_NAGAR" selected>Dhanwantri Nagar, Jabalpur</option>
                        <option value="JABALPUR">Jabalpur City, MP</option>
                        <option value="JAIPUR">Jaipur, Rajasthan</option>
                        <option value="CHENNAI">Chennai, Tamil Nadu</option>
                        <option value="DELHI">Delhi NCR</option>
                        <option value="GUWAHATI">Guwahati, Assam</option>
                        <option value="MUMBAI">Mumbai, Maharashtra</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label class="setting-label">Gemini API Key</label>
                    <input type="password" id="setting-api-key" class="setting-input" placeholder="Enter your API key">
                    <p class="setting-hint">Get your key from <a href="https://aistudio.google.com/apikey"
                            target="_blank">Google AI Studio</a></p>
                </div>

                <div class="setting-group">
                    <label class="setting-label">
                        <input type="checkbox" id="setting-auto-ai" checked>
                        Auto-run AI analysis
                    </label>
                </div>

                <div class="setting-group">
                    <label class="setting-label">
                        <input type="checkbox" id="setting-notifications">
                        Enable notifications
                    </label>
                </div>

                <div class="setting-group">
                    <label class="setting-label">Simulation Mode (for testing)</label>
                    <select id="setting-simulation" class="setting-select">
                        <option value="">Disabled (Real Device)</option>
                        <option value="clean_water">Clean Water</option>
                        <option value="tap_water">Tap Water</option>
                        <option value="dirty_water">Dirty Water</option>
                        <option value="contaminated">Contaminated</option>
                        <option value="sensor_error">Sensor Error</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btn-save-settings" class="btn-primary">Save Settings</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script src="js/bluetooth.js"></script>
    <script src="js/gemini.js"></script>
    <script src="js/app.js"></script>
</body>

</html>