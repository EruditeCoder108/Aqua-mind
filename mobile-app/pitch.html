<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aqua-Mind | Water Quality Intelligence for India</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-deep: #050b14;
            --bg-surface: #0f2744;
            --bg-card: #142d4c;
            --accent: #00d4ff;
            --accent-glow: rgba(0, 212, 255, 0.4);
            --text-main: #ffffff;
            --text-muted: #94a3b8;
            --safe: #00e676;
            --caution: #ffab00;
            --danger: #ff5252;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-deep);
            color: var(--text-main);
            line-height: 1.7;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
            position: relative;
            z-index: 2;
        }

        section {
            padding: 100px 0;
            position: relative;
        }

        /* Nav */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(5, 11, 20, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            padding: 16px 0;
        }

        nav .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: 800;
        }

        .logo span {
            color: var(--accent);
        }

        .nav-links {
            display: flex;
            gap: 32px;
        }

        .nav-links a {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 14px;
            transition: all 0.3s;
        }

        .nav-links a:hover {
            color: var(--accent);
        }

        /* Hero */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            padding-top: 80px;
            position: relative;
            overflow: hidden;
        }

        .hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(ellipse at 70% 30%, rgba(0, 212, 255, 0.15) 0%, transparent 50%), radial-gradient(ellipse at 30% 80%, rgba(0, 100, 200, 0.1) 0%, transparent 40%);
        }

        #particles-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            width: 100%;
        }

        .hero h1 {
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            font-weight: 800;
            margin-bottom: 24px;
            line-height: 1.1;
        }

        .text-gradient {
            background: linear-gradient(135deg, #fff 0%, var(--accent) 50%, #0099ff 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero-subtitle {
            font-size: clamp(1.1rem, 2vw, 1.4rem);
            color: var(--text-muted);
            max-width: 700px;
            margin: 0 auto 40px;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 48px;
            margin-top: 48px;
            flex-wrap: wrap;
        }

        .hero-stat {
            text-align: center;
        }

        .hero-stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
        }

        .hero-stat-label {
            font-size: 14px;
            color: var(--text-muted);
        }

        /* Buttons */
        .btn {
            display: inline-block;
            padding: 16px 40px;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s;
            cursor: pointer;
            border: none;
            font-size: 16px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent), #0099ff);
            color: var(--bg-deep);
            box-shadow: 0 4px 30px rgba(0, 212, 255, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 40px rgba(0, 212, 255, 0.5);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-main);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--accent);
        }

        /* Section Headers */
        .section-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .section-tag {
            display: inline-block;
            padding: 8px 20px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 30px;
            font-size: 12px;
            font-weight: 600;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 16px;
        }

        .section-title {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 800;
            margin-bottom: 16px;
        }

        .section-desc {
            color: var(--text-muted);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Problem Cards */
        .problem-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
        }

        .problem-card {
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(20, 45, 76, 0.5) 100%);
            border-radius: 20px;
            padding: 32px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .problem-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .problem-card:hover {
            transform: translateY(-8px);
            border-color: rgba(0, 212, 255, 0.3);
        }

        .problem-card:hover::before {
            opacity: 1;
        }

        .problem-icon {
            font-size: 48px;
            margin-bottom: 20px;
        }

        .problem-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .problem-text {
            color: var(--text-muted);
            font-size: 15px;
        }

        /* Demo Section */
        .demo-container {
            display: grid;
            grid-template-columns: 1.2fr 0.8fr;
            gap: 48px;
            align-items: start;
        }

        @media (max-width: 900px) {
            .demo-container {
                grid-template-columns: 1fr;
            }
        }

        .engine-box {
            background: linear-gradient(135deg, rgba(15, 39, 68, 0.9) 0%, rgba(10, 22, 40, 0.9) 100%);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 24px;
            padding: 40px;
            position: relative;
            overflow: hidden;
        }

        .engine-box::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -30%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(0, 212, 255, 0.1) 0%, transparent 70%);
            pointer-events: none;
        }

        /* Pipeline */
        .pipeline {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 30px 0;
        }

        .stage {
            display: flex;
            align-items: center;
            gap: 20px;
            background: var(--bg-deep);
            border: 2px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 16px;
            transition: all 0.4s;
        }

        .stage.active {
            border-color: var(--accent);
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.2);
        }

        .stage.complete {
            border-color: var(--safe);
        }

        .stage.warning {
            border-color: var(--caution);
        }

        .stage-num {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 14px;
            flex-shrink: 0;
        }

        .stage.active .stage-num {
            background: var(--accent);
            color: var(--bg-deep);
        }

        .stage-info {
            flex: 1;
        }

        .stage-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 4px;
        }

        .stage-val {
            font-family: 'JetBrains Mono', monospace;
            font-size: 24px;
            font-weight: 700;
        }

        .stage-status {
            font-size: 12px;
            color: var(--text-muted);
        }

        /* Progress Bar */
        .progress-container {
            margin: 20px 0;
        }

        .progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--accent), var(--safe));
            transition: width 0.3s;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 8px;
        }

        /* Phone Mockup */
        .phone-mockup {
            width: 280px;
            height: 560px;
            background: #000;
            border-radius: 40px;
            border: 6px solid #1a1a1a;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5), inset 0 0 0 2px rgba(255, 255, 255, 0.1);
        }

        .phone-notch {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 24px;
            background: #000;
            border-radius: 12px;
            z-index: 10;
        }

        .phone-screen {
            padding: 40px 16px 16px;
            height: 100%;
            background: var(--bg-deep);
            display: flex;
            flex-direction: column;
        }

        .phone-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .phone-logo {
            font-weight: 700;
            font-size: 14px;
        }

        .phone-status {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .phone-dot {
            width: 8px;
            height: 8px;
            background: var(--text-muted);
            border-radius: 50%;
            transition: background 0.3s;
        }

        .phone-dot.active {
            background: var(--safe);
            box-shadow: 0 0 10px var(--safe);
        }

        .phone-score-ring {
            width: 120px;
            height: 120px;
            margin: 16px auto;
            position: relative;
        }

        .phone-score-ring svg {
            transform: rotate(-90deg);
        }

        .phone-ring-bg {
            fill: none;
            stroke: rgba(255, 255, 255, 0.1);
            stroke-width: 8;
        }

        .phone-ring-fill {
            fill: none;
            stroke: var(--text-muted);
            stroke-width: 8;
            stroke-linecap: round;
            stroke-dasharray: 339;
            stroke-dashoffset: 339;
            transition: all 1s ease;
        }

        .phone-score-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 36px;
            font-weight: 800;
            font-family: 'JetBrains Mono', monospace;
        }

        .phone-verdict {
            text-align: center;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 16px;
            padding: 8px 16px;
            border-radius: 20px;
            display: inline-block;
            margin-left: auto;
            margin-right: auto;
            background: rgba(255, 255, 255, 0.1);
        }

        .phone-readings {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 16px;
        }

        .phone-reading {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 12px;
            text-align: center;
        }

        .phone-reading-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 16px;
            font-weight: 700;
        }

        .phone-reading-label {
            font-size: 10px;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .phone-ai {
            flex: 1;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 12px;
            padding: 12px;
            border-left: 3px solid var(--accent);
            overflow: hidden;
        }

        .phone-ai-title {
            font-size: 10px;
            color: var(--accent);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .phone-ai-text {
            font-size: 12px;
            color: var(--text-muted);
            line-height: 1.5;
        }

        .typing-cursor {
            display: inline-block;
            width: 2px;
            height: 14px;
            background: var(--accent);
            animation: blink 1s infinite;
            vertical-align: text-bottom;
            margin-left: 2px;
        }

        @keyframes blink {

            0%,
            50% {
                opacity: 1;
            }

            51%,
            100% {
                opacity: 0;
            }
        }

        /* Ghost Map */
        .ghost-map-section {
            background: linear-gradient(180deg, var(--bg-deep) 0%, #0a1525 100%);
        }

        .map-container {
            width: 100%;
            height: 450px;
            background: radial-gradient(ellipse at center, #0f2744 0%, var(--bg-deep) 100%);
            border-radius: 24px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .map-grid {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
        }

        .map-node {
            position: absolute;
            border-radius: 50%;
            transition: all 0.5s;
        }

        .map-node.device {
            width: 20px;
            height: 20px;
            background: var(--accent);
            box-shadow: 0 0 20px var(--accent);
            z-index: 10;
        }

        .map-node.device::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 40px;
            height: 40px;
            border: 2px solid var(--accent);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: ping 2s infinite;
        }

        @keyframes ping {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }

            100% {
                transform: translate(-50%, -50%) scale(2);
                opacity: 0;
            }
        }

        .map-node.safe {
            width: 10px;
            height: 10px;
            background: var(--safe);
            box-shadow: 0 0 8px var(--safe);
        }

        .map-node.caution {
            width: 10px;
            height: 10px;
            background: var(--caution);
            box-shadow: 0 0 8px var(--caution);
        }

        .map-node.unsafe {
            width: 12px;
            height: 12px;
            background: var(--danger);
            box-shadow: 0 0 12px var(--danger);
        }

        .cluster-zone {
            position: absolute;
            border: 2px dashed var(--danger);
            background: rgba(255, 82, 82, 0.1);
            border-radius: 50%;
            animation: clusterPulse 2s infinite;
        }

        @keyframes clusterPulse {

            0%,
            100% {
                opacity: 0.3;
                transform: scale(1);
            }

            50% {
                opacity: 0.6;
                transform: scale(1.05);
            }
        }

        .cluster-alert {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: linear-gradient(135deg, rgba(255, 82, 82, 0.95), rgba(200, 50, 50, 0.95));
            padding: 16px 24px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            gap: 16px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(10px);
        }

        .cluster-alert.show {
            opacity: 1;
            transform: translateY(0);
        }

        .cluster-alert i {
            font-size: 24px;
        }

        .cluster-alert-text h4 {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 2px;
        }

        .cluster-alert-text p {
            font-size: 12px;
            opacity: 0.9;
        }

        /* Map Legend */
        .map-legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(10, 22, 40, 0.9);
            backdrop-filter: blur(10px);
            padding: 16px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 12px;
            margin-bottom: 8px;
        }

        .legend-item:last-child {
            margin-bottom: 0;
        }

        .legend-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .legend-dot.device {
            background: var(--accent);
            box-shadow: 0 0 8px var(--accent);
        }

        .legend-dot.safe {
            background: var(--safe);
        }

        .legend-dot.caution {
            background: var(--caution);
        }

        .legend-dot.unsafe {
            background: var(--danger);
        }

        /* Cost Cards */
        .cost-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
        }

        @media (max-width: 768px) {
            .cost-grid {
                grid-template-columns: 1fr;
            }
        }

        .cost-card {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 32px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s;
        }

        .cost-card.featured {
            border-color: var(--accent);
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(0, 100, 150, 0.2) 100%);
            transform: scale(1.02);
        }

        .cost-label {
            font-size: 14px;
            color: var(--text-muted);
            margin-bottom: 12px;
        }

        .cost-price {
            font-size: 3rem;
            font-weight: 800;
            font-family: 'JetBrains Mono', monospace;
            margin-bottom: 8px;
        }

        .cost-price.expensive {
            color: var(--danger);
        }

        .cost-price.affordable {
            color: var(--safe);
        }

        .cost-note {
            font-size: 14px;
            color: var(--text-muted);
            margin-bottom: 24px;
        }

        .cost-features {
            list-style: none;
            text-align: left;
        }

        .cost-features li {
            padding: 10px 0;
            font-size: 14px;
            color: var(--text-muted);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cost-features li:last-child {
            border: none;
        }

        .cost-features li i {
            color: var(--safe);
        }

        /* CTA */
        .cta-section {
            background: linear-gradient(180deg, #0a1525 0%, var(--bg-deep) 100%);
            text-align: center;
        }

        .cta-buttons {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 40px;
        }

        /* Footer */
        footer {
            padding: 60px 0;
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        footer p {
            color: var(--text-muted);
            font-size: 14px;
        }

        /* Animations */
        .fade-in {
            opacity: 0;
            transform: translateY(40px);
            transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .count-up {
            opacity: 0;
        }

        .count-up.visible {
            opacity: 1;
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav>
        <div class="container">
            <div class="logo">üíß Aqua<span>Mind</span></div>
            <div class="nav-links">
                <a href="#problem">Problem</a>
                <a href="#solution">Solution</a>
                <a href="#network">Network</a>
                <a href="#cost">Cost</a>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <section class="hero">
        <div class="hero-bg"></div>
        <canvas id="particles-canvas"></canvas>
        <div class="container hero-content">
            <h1>The <span class="text-gradient">‚Çπ1,500 Device</span> That<br>Outsmarts ‚Çπ50,000 Labs</h1>
            <p class="hero-subtitle">
                Aqua-Mind uses AI and smart software to turn cheap sensors into reliable water quality testers.
                Built for the Jal Jeevan Mission. Designed for every Indian village.
            </p>
            <div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
                <a href="#solution" class="btn btn-primary">See The Demo</a>
                <a href="https://github.com/EruditeCoder108/Aqua-mind" class="btn btn-secondary" target="_blank">View
                    GitHub</a>
            </div>
            <div class="hero-stats">
                <div class="hero-stat">
                    <div class="hero-stat-value count-up" data-target="1500" data-prefix="‚Çπ">‚Çπ0</div>
                    <div class="hero-stat-label">Device Cost</div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-value count-up" data-target="30" data-suffix="s">0s</div>
                    <div class="hero-stat-label">Test Time</div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-value count-up" data-target="94" data-suffix="%">0%</div>
                    <div class="hero-stat-label">Accuracy</div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-value">‚àû</div>
                    <div class="hero-stat-label">Tests Per Device</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Problem Section -->
    <section id="problem">
        <div class="container">
            <div class="section-header">
                <span class="section-tag">The Challenge</span>
                <h2 class="section-title">Why Current Solutions Fail</h2>
                <p class="section-desc">11.68 crore rural households need safe water. But how do they KNOW it's safe?
                </p>
            </div>
            <div class="problem-grid">
                <div class="problem-card fade-in">
                    <div class="problem-icon">üî¨</div>
                    <h3 class="problem-title">Lab Tests Are Slow</h3>
                    <p class="problem-text">Professional testing takes 2-3 days. By the time results arrive, your family
                        has already been drinking the water.</p>
                </div>
                <div class="problem-card fade-in">
                    <div class="problem-icon">üí∏</div>
                    <h3 class="problem-title">Labs Are Expensive</h3>
                    <p class="problem-text">Each test costs ‚Çπ500-2000. A village can't afford regular testing. Most
                        never test at all.</p>
                </div>
                <div class="problem-card fade-in">
                    <div class="problem-icon">üìâ</div>
                    <h3 class="problem-title">Cheap Sensors Lie</h3>
                    <p class="problem-text">A ‚Çπ300 TDS meter gives different readings every time. Is it 350 or 450?
                        Nobody knows which is real.</p>
                </div>
                <div class="problem-card fade-in">
                    <div class="problem-icon">ü§∑</div>
                    <h3 class="problem-title">Numbers Without Meaning</h3>
                    <p class="problem-text">"TDS: 385 ppm" ‚Äî What does this mean? Is it safe? Should I boil it? Sensors
                        don't explain.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Solution / Demo Section -->
    <section id="solution" style="background: linear-gradient(180deg, var(--bg-deep) 0%, #0a1525 100%);">
        <div class="container">
            <div class="section-header">
                <span class="section-tag">Our Innovation</span>
                <h2 class="section-title">The Trust Engine: Live Demo</h2>
                <p class="section-desc">Watch how we validate sensor data in real-time with our 5-pillar system.</p>
            </div>

            <div class="demo-container fade-in">
                <!-- Engine Interface -->
                <div class="engine-box">
                    <div style="text-align: center; margin-bottom: 24px;">
                        <button id="btn-sim" class="btn btn-primary" onclick="startSimulation()"
                            style="font-size: 16px;">
                            <i class="fa-solid fa-vial"></i> Dip Sensor in Water
                        </button>
                    </div>

                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                        <div class="progress-label"><span id="progress-text">Ready to test</span><span
                                id="progress-percent">0%</span></div>
                    </div>

                    <div class="pipeline">
                        <div class="stage" id="stage-1">
                            <div class="stage-num">1</div>
                            <div class="stage-info">
                                <div class="stage-title">RAW SENSOR INPUT</div>
                                <div class="stage-val" id="val-raw">---</div>
                                <div class="stage-status" id="txt-raw">Waiting for sample...</div>
                            </div>
                        </div>
                        <div class="stage" id="stage-2">
                            <div class="stage-num">2</div>
                            <div class="stage-info">
                                <div class="stage-title">TRI-CHECK FILTER</div>
                                <div class="stage-val" id="val-stable">---</div>
                                <div class="stage-status" id="txt-stable">3-burst statistical averaging</div>
                            </div>
                        </div>
                        <div class="stage" id="stage-3">
                            <div class="stage-num">3</div>
                            <div class="stage-info">
                                <div class="stage-title">JAL-SCORE OUTPUT</div>
                                <div class="stage-val" id="val-score">---</div>
                                <div class="stage-status" id="txt-score">Final validated result</div>
                            </div>
                        </div>
                    </div>

                    <div
                        style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 12px; border-left: 3px solid var(--accent); margin-top: 20px;">
                        <div
                            style="font-size: 11px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px;">
                            Algorithm</div>
                        <code style="font-family: 'JetBrains Mono', monospace; font-size: 13px; color: var(--accent);">
                            Jal_Score = 100 - (TDS_Risk √ó Weight) - (Turb_Risk √ó Weight) - Stability_Penalty
                        </code>
                    </div>

                    <!-- Terminal Log -->
                    <div id="sim-log"
                        style="background: #000; padding: 16px; border-radius: 12px; margin-top: 16px; font-family: 'JetBrains Mono', monospace; font-size: 12px; color: #0f0; max-height: 150px; overflow-y: auto; border: 1px solid rgba(0,255,0,0.2);">
                        <div style="color: #666; margin-bottom: 4px;">// Terminal Output</div>
                        <div>> System Ready. Profile: JABALPUR</div>
                        <div>> Waiting for sample...</div>
                    </div>
                </div>

                <!-- Phone Mockup -->
                <div class="phone-mockup">
                    <div class="phone-notch"></div>
                    <div class="phone-screen">
                        <div class="phone-header">
                            <span class="phone-logo">üíß AquaMind</span>
                            <div class="phone-status">
                                <div class="phone-dot" id="phone-dot"></div>
                            </div>
                        </div>
                        <div class="phone-score-ring">
                            <svg viewBox="0 0 120 120" width="120" height="120">
                                <circle class="phone-ring-bg" cx="60" cy="60" r="54"></circle>
                                <circle class="phone-ring-fill" id="phone-ring" cx="60" cy="60" r="54"></circle>
                            </svg>
                            <div class="phone-score-value" id="phone-score">--</div>
                        </div>
                        <div class="phone-verdict" id="phone-verdict">Ready</div>
                        <div class="phone-readings">
                            <div class="phone-reading">
                                <div class="phone-reading-value" id="phone-tds">--</div>
                                <div class="phone-reading-label">TDS (ppm)</div>
                            </div>
                            <div class="phone-reading">
                                <div class="phone-reading-value" id="phone-turb">--</div>
                                <div class="phone-reading-label">Turbidity</div>
                            </div>
                        </div>
                        <div class="phone-ai">
                            <div class="phone-ai-title"><i class="fa-solid fa-sparkles"></i> Gemini AI</div>
                            <div class="phone-ai-text" id="phone-ai-text">Waiting for analysis...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Ghost Map Section -->
    <section id="network" class="ghost-map-section">
        <div class="container">
            <div class="section-header">
                <span class="section-tag">Network Intelligence</span>
                <h2 class="section-title">The Ghost Map Effect</h2>
                <p class="section-desc">One device protects a family. Connected devices protect a city.</p>
                <button class="btn btn-secondary" onclick="triggerPipeBurst()" style="margin-top: 16px;">
                    <i class="fa-solid fa-triangle-exclamation"></i> Simulate Pipe Burst
                </button>
            </div>

            <div class="map-container fade-in" id="ghost-map">
                <div class="map-grid"></div>
                <!-- SVG layer for connection lines -->
                <svg id="connections-svg"
                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 5;"></svg>
                <!-- Nodes will be added by JS -->
                <div class="map-legend">
                    <div class="legend-item">
                        <div class="legend-dot device"></div> Your Device
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot safe"></div> Safe (80+)
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot caution"></div> Caution (50-80)
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot unsafe"></div> Unsafe (&lt;50)
                    </div>
                </div>
                <!-- Network Stats Panel -->
                <div
                    style="position: absolute; top: 20px; left: 20px; background: rgba(10, 22, 40, 0.95); backdrop-filter: blur(10px); padding: 16px 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); font-size: 12px;">
                    <div
                        style="color: var(--accent); font-weight: 700; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px;">
                        üì° Network Status</div>
                    <div style="margin-bottom: 6px;">Active Nodes: <span style="color: var(--safe); font-weight: 600;"
                            id="active-nodes">12</span></div>
                    <div style="margin-bottom: 6px;">Safe: <span style="color: var(--safe);">9</span> | Caution: <span
                            style="color: var(--caution);">2</span> | Alert: <span style="color: var(--danger);"
                            id="alert-count">0</span></div>
                    <div>Coverage: <span style="color: var(--accent);">Sector 1-5</span></div>
                </div>
                <div class="cluster-alert" id="cluster-alert">
                    <i class="fa-solid fa-triangle-exclamation"></i>
                    <div class="cluster-alert-text">
                        <h4>Contamination Cluster Detected</h4>
                        <p id="cluster-location">Sector 4: High Turbidity (Pipe Burst Likely)</p>
                    </div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 32px; margin-top: 48px; text-align: center;"
                class="fade-in">
                <div>
                    <div style="font-size: 32px; margin-bottom: 12px;">üåê</div>
                    <h3 style="font-size: 18px; margin-bottom: 8px;">Decentralized</h3>
                    <p style="font-size: 14px; color: var(--text-muted);">Every home becomes a monitoring station.</p>
                </div>
                <div>
                    <div style="font-size: 32px; margin-bottom: 12px;">‚ö°</div>
                    <h3 style="font-size: 18px; margin-bottom: 8px;">Real-Time</h3>
                    <p style="font-size: 14px; color: var(--text-muted);">Detects issues hours before official tests.
                    </p>
                </div>
                <div>
                    <div style="font-size: 32px; margin-bottom: 12px;">üß†</div>
                    <h3 style="font-size: 18px; margin-bottom: 8px;">Pattern Match</h3>
                    <p style="font-size: 14px; color: var(--text-muted);">Identifies household vs city-wide issues.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Cost Section -->
    <section id="cost">
        <div class="container">
            <div class="section-header">
                <span class="section-tag">Affordable for All</span>
                <h2 class="section-title">Lab-Aligned Confidence at a Fraction of the Cost</h2>
            </div>

            <div class="cost-grid fade-in">
                <div class="cost-card">
                    <div class="cost-label">Professional Lab Test</div>
                    <div class="cost-price expensive">‚Çπ1,500</div>
                    <div class="cost-note">per test</div>
                    <ul class="cost-features">
                        <li><i class="fa-solid fa-check"></i> Accurate results</li>
                        <li><i class="fa-solid fa-xmark" style="color: var(--danger);"></i> Takes 2-3 days</li>
                        <li><i class="fa-solid fa-xmark" style="color: var(--danger);"></i> Need to travel</li>
                        <li><i class="fa-solid fa-xmark" style="color: var(--danger);"></i> One-time only</li>
                    </ul>
                </div>
                <div class="cost-card featured">
                    <div class="cost-label">Aqua-Mind (ESP32)</div>
                    <div class="cost-price affordable">‚Çπ1,500</div>
                    <div class="cost-note">one-time purchase</div>
                    <ul class="cost-features">
                        <li><i class="fa-solid fa-check"></i> TDS + Turbidity + Temp</li>
                        <li><i class="fa-solid fa-check"></i> 5-layer validation</li>
                        <li><i class="fa-solid fa-check"></i> AI-powered advice</li>
                        <li><i class="fa-solid fa-check"></i> Unlimited tests forever</li>
                        <li><i class="fa-solid fa-check"></i> Network intelligence</li>
                        <li><i class="fa-solid fa-check"></i> Works offline</li>
                    </ul>
                </div>
                <div class="cost-card">
                    <div class="cost-label">Basic TDS Meter</div>
                    <div class="cost-price" style="color: var(--caution);">‚Çπ300</div>
                    <div class="cost-note">one-time</div>
                    <ul class="cost-features">
                        <li><i class="fa-solid fa-check"></i> Very cheap</li>
                        <li><i class="fa-solid fa-xmark" style="color: var(--danger);"></i> Only measures TDS</li>
                        <li><i class="fa-solid fa-xmark" style="color: var(--danger);"></i> High sensor noise</li>
                        <li><i class="fa-solid fa-xmark" style="color: var(--danger);"></i> No interpretation</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <div class="section-header">
                <span class="section-tag">Join the Mission</span>
                <h2 class="section-title">Clean Water for All</h2>
                <p class="section-desc">Help us bring trusted water quality testing to every Indian village.</p>
            </div>
            <div class="cta-buttons">
                <a href="https://github.com/EruditeCoder108/Aqua-mind" class="btn btn-primary" target="_blank">View Full
                    Project ‚Üí</a>
                <a href="map.html" class="btn btn-secondary">Try Ghost Map Demo</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="logo" style="margin-bottom: 16px;">üíß Aqua<span style="color: var(--accent);">Mind</span></div>
            <p>Jal Jeevan Mission Innovation Challenge Entry</p>
            <p style="margin-top: 8px;">Dhanwantri Nagar, Jabalpur, Madhya Pradesh</p>
            <p style="margin-top: 24px; font-size: 12px; opacity: 0.5;">¬© 2026 Aqua-Mind | Open Source under MIT License
            </p>
        </div>
    </footer>

    <script>
        // ========================================
        // PARTICLE ANIMATION (Water droplets)
        // ========================================
        const canvas = document.getElementById('particles-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        class Particle {
            constructor() {
                this.reset();
            }
            reset() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 2 + 1;
                this.speedY = Math.random() * 0.5 + 0.2;
                this.opacity = Math.random() * 0.5 + 0.2;
            }
            update() {
                this.y += this.speedY;
                if (this.y > canvas.height) this.reset();
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(0, 212, 255, ${this.opacity})`;
                ctx.fill();
            }
        }

        for (let i = 0; i < 50; i++) particles.push(new Particle());

        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animateParticles);
        }
        animateParticles();

        // ========================================
        // SCROLL ANIMATIONS
        // ========================================
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    if (entry.target.classList.contains('count-up')) {
                        animateCounter(entry.target);
                    }
                }
            });
        }, { threshold: 0.2 });

        document.querySelectorAll('.fade-in, .count-up').forEach(el => observer.observe(el));

        // ========================================
        // COUNTER ANIMATION
        // ========================================
        function animateCounter(el) {
            const target = parseInt(el.dataset.target) || 0;
            const prefix = el.dataset.prefix || '';
            const suffix = el.dataset.suffix || '';
            let current = 0;
            const increment = target / 50;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                }
                el.textContent = prefix + Math.floor(current) + suffix;
            }, 30);
        }

        // ========================================
        // TRUST ENGINE SIMULATION
        // ========================================
        function startSimulation() {
            const btn = document.getElementById('btn-sim');
            const stages = [document.getElementById('stage-1'), document.getElementById('stage-2'), document.getElementById('stage-3')];
            const progressFill = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');
            const progressPercent = document.getElementById('progress-percent');

            btn.disabled = true;
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Analyzing...';

            stages.forEach(s => { s.classList.remove('active', 'complete', 'warning'); });
            progressFill.style.width = '0%';

            // Reset phone
            document.getElementById('phone-dot').classList.remove('active');
            document.getElementById('phone-score').textContent = '--';
            document.getElementById('phone-ring').style.strokeDashoffset = '339';
            document.getElementById('phone-ring').style.stroke = 'var(--text-muted)';
            document.getElementById('phone-verdict').textContent = 'Analyzing...';
            document.getElementById('phone-verdict').style.background = 'rgba(255,255,255,0.1)';
            document.getElementById('phone-verdict').style.color = 'var(--text-main)';
            document.getElementById('phone-tds').textContent = '--';
            document.getElementById('phone-turb').textContent = '--';
            document.getElementById('phone-ai-text').innerHTML = 'Connecting to sensors...<span class="typing-cursor"></span>';

            // Stage 1: Raw input
            stages[0].classList.add('active');
            progressText.textContent = 'Reading raw sensor data...';
            log('Starting 5-Pillar Analysis...');
            log('Pillar 1: Reading raw sensor input...');
            let noiseCount = 0;
            const noiseInterval = setInterval(() => {
                const val = Math.floor(Math.random() * 130) + 320;
                document.getElementById('val-raw').textContent = val + ' ppm';
                document.getElementById('val-raw').style.color = 'var(--danger)';
                document.getElementById('txt-raw').textContent = '‚ö†Ô∏è High variance detected';
                progressFill.style.width = (5 + noiseCount * 2) + '%';
                progressPercent.textContent = Math.floor(5 + noiseCount * 2) + '%';
                noiseCount++;
                if (noiseCount > 15) {
                    clearInterval(noiseInterval);
                    phase2();
                }
            }, 100);

            function phase2() {
                stages[0].classList.remove('active');
                stages[0].classList.add('complete');
                stages[1].classList.add('active');

                document.getElementById('val-raw').textContent = '385 ppm';
                document.getElementById('val-raw').style.color = 'var(--accent)';
                document.getElementById('txt-raw').textContent = '‚úì Captured';

                progressText.textContent = 'Running Tri-Check filter...';
                log('Pillar 2: Tri-Check Statistical Filter');
                document.getElementById('val-stable').textContent = 'Filtering...';
                document.getElementById('txt-stable').textContent = 'Burst 1/3...';

                progressFill.style.width = '40%';
                progressPercent.textContent = '40%';

                setTimeout(() => {
                    document.getElementById('txt-stable').textContent = 'Burst 2/3...';
                    progressFill.style.width = '55%';
                    progressPercent.textContent = '55%';
                }, 500);

                setTimeout(() => {
                    document.getElementById('txt-stable').textContent = 'Burst 3/3...';
                    progressFill.style.width = '70%';
                    progressPercent.textContent = '70%';
                }, 1000);

                setTimeout(() => {
                    document.getElementById('val-stable').textContent = '385 ppm';
                    document.getElementById('val-stable').style.color = 'var(--safe)';
                    document.getElementById('txt-stable').textContent = '‚úì Stability: 94%';
                    log('Stability Index: 94% (High Confidence)');
                    phase3();
                }, 1500);
            }

            function phase3() {
                stages[1].classList.remove('active');
                stages[1].classList.add('complete');
                stages[2].classList.add('active');

                progressText.textContent = 'Calculating Jal-Score...';
                progressFill.style.width = '85%';
                progressPercent.textContent = '85%';
                log('Pillar 3: Geo-Profile JABALPUR applied');
                log('Pillar 4: Calculating Jal-Score...');

                let score = 0;
                const targetScore = 78;
                const scoreInterval = setInterval(() => {
                    score += 4;
                    if (score >= targetScore) {
                        score = targetScore;
                        clearInterval(scoreInterval);
                        finishSimulation(score);
                    }
                    document.getElementById('val-score').textContent = score + '/100';
                }, 40);
            }

            function finishSimulation(score) {
                stages[2].classList.remove('active');
                stages[2].classList.add('warning');

                document.getElementById('val-score').style.color = 'var(--caution)';
                document.getElementById('txt-score').textContent = '‚ö†Ô∏è CAUTION LEVEL';

                progressFill.style.width = '100%';
                progressPercent.textContent = '100%';
                progressText.textContent = 'Analysis complete!';
                log('Pillar 5: Analysis Complete!');
                log('Result: Jal-Score ' + score + '/100 (CAUTION)');
                log('Sending to mobile app via Bluetooth...');

                // Update phone
                document.getElementById('phone-dot').classList.add('active');
                document.getElementById('phone-score').textContent = score;
                document.getElementById('phone-ring').style.strokeDashoffset = 339 - (score / 100) * 339;
                document.getElementById('phone-ring').style.stroke = 'var(--caution)';
                document.getElementById('phone-verdict').textContent = '‚ö†Ô∏è CAUTION';
                document.getElementById('phone-verdict').style.background = 'rgba(255, 171, 0, 0.2)';
                document.getElementById('phone-verdict').style.color = 'var(--caution)';
                document.getElementById('phone-tds').textContent = '385';
                document.getElementById('phone-turb').textContent = '2.1';

                // AI typing effect
                const aiText = document.getElementById('phone-ai-text');
                const message = '"‡§™‡§æ‡§®‡•Ä ‡§Æ‡•á‡§Ç TDS ‡§•‡•ã‡§°‡§º‡§æ ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§π‡•à‡•§ ‡§™‡•Ä‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á RO ‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§"';
                aiText.innerHTML = '';
                let i = 0;
                const typeInterval = setInterval(() => {
                    aiText.innerHTML = message.substring(0, i) + '<span class="typing-cursor"></span>';
                    i++;
                    if (i > message.length) {
                        clearInterval(typeInterval);
                        aiText.innerHTML = message;
                    }
                }, 30);

                setTimeout(() => {
                    btn.innerHTML = '<i class="fa-solid fa-redo"></i> Test Again';
                    btn.disabled = false;
                }, 1500);
            }
        }

        // ========================================
        // GHOST MAP ANIMATION (Enhanced)
        // ========================================
        const mapContainer = document.getElementById('ghost-map');
        const svgConnections = document.getElementById('connections-svg');
        const mapNodes = [];
        const connectionLines = [];

        // Create device node (center)
        const deviceNode = document.createElement('div');
        deviceNode.className = 'map-node device';
        deviceNode.style.top = '50%';
        deviceNode.style.left = '50%';
        deviceNode.style.transform = 'translate(-50%, -50%)';
        mapContainer.appendChild(deviceNode);

        // More nodes for better visualization
        const nodeData = [
            // Safe nodes (scattered around)
            { x: 20, y: 25, status: 'safe', id: 'n1' },
            { x: 35, y: 18, status: 'safe', id: 'n2' },
            { x: 55, y: 15, status: 'safe', id: 'n3' },
            { x: 72, y: 22, status: 'safe', id: 'n4' },
            { x: 85, y: 35, status: 'safe', id: 'n5' },
            { x: 78, y: 55, status: 'safe', id: 'n6' },
            { x: 82, y: 75, status: 'safe', id: 'n7' },
            { x: 60, y: 80, status: 'safe', id: 'n8' },
            // Caution nodes
            { x: 35, y: 55, status: 'caution', id: 'n9' },
            { x: 65, y: 65, status: 'caution', id: 'n10' },
            // Unsafe cluster (for pipe burst demo)
            { x: 15, y: 70, status: 'safe', id: 'c1' },  // Will turn unsafe
            { x: 22, y: 78, status: 'safe', id: 'c2' },
            { x: 30, y: 72, status: 'safe', id: 'c3' },
        ];

        // Create nodes with data attributes
        nodeData.forEach((data, index) => {
            const node = document.createElement('div');
            node.className = `map-node ${data.status}`;
            node.style.top = data.y + '%';
            node.style.left = data.x + '%';
            node.dataset.x = data.x;
            node.dataset.y = data.y;
            node.dataset.id = data.id;
            node.dataset.originalStatus = data.status;
            mapContainer.appendChild(node);
            mapNodes.push(node);
        });

        // Cluster zone (hidden initially)
        const clusterZone = document.createElement('div');
        clusterZone.className = 'cluster-zone';
        clusterZone.style.width = '130px';
        clusterZone.style.height = '100px';
        clusterZone.style.top = '65%';
        clusterZone.style.left = '10%';
        clusterZone.style.opacity = '0';
        mapContainer.appendChild(clusterZone);

        // Function to draw connection line between two nodes
        function drawConnection(node1, node2, color = 'rgba(255, 82, 82, 0.6)') {
            const rect = mapContainer.getBoundingClientRect();
            const x1 = parseFloat(node1.dataset.x);
            const y1 = parseFloat(node1.dataset.y);
            const x2 = parseFloat(node2.dataset.x);
            const y2 = parseFloat(node2.dataset.y);

            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            line.setAttribute('x1', x1 + '%');
            line.setAttribute('y1', y1 + '%');
            line.setAttribute('x2', x2 + '%');
            line.setAttribute('y2', y2 + '%');
            line.setAttribute('stroke', color);
            line.setAttribute('stroke-width', '3');
            line.setAttribute('stroke-linecap', 'round');
            line.setAttribute('stroke-dasharray', '8, 4');
            line.style.transition = 'all 0.5s ease';
            line.style.opacity = '0';

            svgConnections.appendChild(line);
            connectionLines.push(line);

            // Animate in
            setTimeout(() => {
                line.style.opacity = '1';
            }, 50);

            return line;
        }

        // Function to clear all connections
        function clearConnections() {
            connectionLines.forEach(line => {
                line.style.opacity = '0';
                setTimeout(() => line.remove(), 500);
            });
            connectionLines.length = 0;
        }

        // Cluster animation loop (auto)
        function animateCluster() {
            const alert = document.getElementById('cluster-alert');

            // Reset
            alert.classList.remove('show');
            clusterZone.style.opacity = '0';
            clearConnections();
            document.getElementById('alert-count').textContent = '0';

            // Reset cluster nodes
            mapNodes.slice(-3).forEach(n => {
                n.className = `map-node ${n.dataset.originalStatus}`;
                n.style.transform = 'scale(1)';
            });

            // After 3s, show contamination spread
            setTimeout(() => {
                const clusterNodes = mapNodes.slice(-3);
                let delay = 0;

                // Animate spread: node by node with connections
                clusterNodes.forEach((node, i) => {
                    setTimeout(() => {
                        node.className = 'map-node unsafe';
                        node.style.transform = 'scale(1.5)';
                        document.getElementById('alert-count').textContent = (i + 1).toString();

                        // Draw connection to previous node
                        if (i > 0) {
                            drawConnection(clusterNodes[i - 1], node);
                        }

                        // Show alert on last node
                        if (i === clusterNodes.length - 1) {
                            clusterZone.style.opacity = '1';
                            alert.classList.add('show');
                        }
                    }, delay);
                    delay += 400; // Spread delay between nodes
                });

            }, 3000);
        }

        // Run cluster animation every 8 seconds
        setInterval(animateCluster, 8000);
        setTimeout(animateCluster, 2000);

        // ========================================
        // LOG FUNCTION (Terminal Output)
        // ========================================
        function log(msg) {
            const box = document.getElementById('sim-log');
            const line = document.createElement('div');
            line.textContent = '> ' + msg;
            box.appendChild(line);
            box.scrollTop = box.scrollHeight;
        }

        // ========================================
        // MANUAL PIPE BURST TRIGGER (Enhanced)
        // ========================================
        function triggerPipeBurst() {
            const alert = document.getElementById('cluster-alert');
            const clusterNodes = mapNodes.slice(-3);

            // Clear any existing connections
            clearConnections();

            // Update location text
            document.getElementById('cluster-location').textContent = 'Sector 4: Pipe Burst Detected - Manual Alert';

            log('üö® ALERT: Manual pipe burst triggered!');
            log('Initiating contamination spread visualization...');

            let delay = 0;

            // Animate spread: node by node with connections
            clusterNodes.forEach((node, i) => {
                setTimeout(() => {
                    node.className = 'map-node unsafe';
                    node.style.transform = 'scale(1.5)';
                    document.getElementById('alert-count').textContent = (i + 1).toString();

                    log(`Node ${i + 1} contaminated at ${new Date().toLocaleTimeString()}`);

                    // Draw connection to previous node
                    if (i > 0) {
                        drawConnection(clusterNodes[i - 1], node);
                    }

                    // Show alert on last node
                    if (i === clusterNodes.length - 1) {
                        clusterZone.style.opacity = '1';
                        alert.classList.add('show');
                        log('‚ö†Ô∏è Cluster formed! 3 devices affected.');
                        log('Recommended: Check water main in Sector 4');
                    }
                }, delay);
                delay += 500; // Spread delay between nodes
            });

            // Reset after 6s
            setTimeout(() => {
                mapNodes.slice(-3).forEach(n => {
                    n.className = `map-node ${n.dataset.originalStatus}`;
                    n.style.transform = 'scale(1)';
                });
                clusterZone.style.opacity = '0';
                clearConnections();
                alert.classList.remove('show');
                document.getElementById('alert-count').textContent = '0';
                log('‚úì Alert cleared. Monitoring resumed.');
            }, 6000);
        }

        // ========================================
        // SMOOTH SCROLL
        // ========================================
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
            });
        });
    </script>
</body>

</html>